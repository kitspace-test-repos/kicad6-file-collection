(kicad_sch (version 20211123) (generator eeschema)

  (uuid 711b9df0-fe9a-46c9-aa72-79c247584e66)

  (paper "A4")

  (lib_symbols
    (symbol "Amplifier_Current:INA181" (pin_names (offset 0.127)) (in_bom yes) (on_board yes)
      (property "Reference" "U" (id 0) (at 3.81 3.81 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Value" "INA181" (id 1) (at 3.81 -2.54 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Footprint" "Package_TO_SOT_SMD:SOT-23-6" (id 2) (at 1.27 1.27 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "http://www.ti.com/lit/ds/symlink/ina181.pdf" (id 3) (at 3.81 3.81 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "current monitor shunt sensor bidirectional" (id 4) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Bidirectional, Low- and High-Side Voltage Output, Current-Sense Amplifier, SOT-23-6" (id 5) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_fp_filters" "SOT?23*" (id 6) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "INA181_0_1"
        (polyline
          (pts
            (xy 5.08 0)
            (xy -5.08 5.08)
            (xy -5.08 -5.08)
            (xy 5.08 0)
          )
          (stroke (width 0.254) (type default) (color 0 0 0 0))
          (fill (type background))
        )
      )
      (symbol "INA181_1_1"
        (pin output line (at 7.62 0 180) (length 2.54)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin power_in line (at -2.54 -7.62 90) (length 3.81)
          (name "GND" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
        (pin input line (at -7.62 2.54 0) (length 2.54)
          (name "+" (effects (font (size 1.27 1.27))))
          (number "3" (effects (font (size 1.27 1.27))))
        )
        (pin input line (at -7.62 -2.54 0) (length 2.54)
          (name "-" (effects (font (size 1.27 1.27))))
          (number "4" (effects (font (size 1.27 1.27))))
        )
        (pin input line (at 2.54 -7.62 90) (length 6.35)
          (name "REF" (effects (font (size 0.508 0.508))))
          (number "5" (effects (font (size 1.27 1.27))))
        )
        (pin power_in line (at -2.54 7.62 270) (length 3.81)
          (name "V+" (effects (font (size 1.27 1.27))))
          (number "6" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "Device:R" (pin_numbers hide) (pin_names (offset 0)) (in_bom yes) (on_board yes)
      (property "Reference" "R" (id 0) (at 2.032 0 90)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "R" (id 1) (at 0 0 90)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "" (id 2) (at -1.778 0 90)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "~" (id 3) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "R res resistor" (id 4) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Resistor" (id 5) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_fp_filters" "R_*" (id 6) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "R_0_1"
        (rectangle (start -1.016 -2.54) (end 1.016 2.54)
          (stroke (width 0.254) (type default) (color 0 0 0 0))
          (fill (type none))
        )
      )
      (symbol "R_1_1"
        (pin passive line (at 0 3.81 270) (length 1.27)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 0 -3.81 90) (length 1.27)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "power:GND" (power) (pin_names (offset 0)) (in_bom yes) (on_board yes)
      (property "Reference" "#PWR" (id 0) (at 0 -6.35 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Value" "GND" (id 1) (at 0 -3.81 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "" (id 2) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "" (id 3) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "power-flag" (id 4) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Power symbol creates a global label with name \"GND\" , ground" (id 5) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "GND_0_1"
        (polyline
          (pts
            (xy 0 0)
            (xy 0 -1.27)
            (xy 1.27 -1.27)
            (xy 0 -2.54)
            (xy -1.27 -1.27)
            (xy 0 -1.27)
          )
          (stroke (width 0) (type default) (color 0 0 0 0))
          (fill (type none))
        )
      )
      (symbol "GND_1_1"
        (pin power_in line (at 0 0 270) (length 0) hide
          (name "GND" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "power:VDD" (power) (pin_names (offset 0)) (in_bom yes) (on_board yes)
      (property "Reference" "#PWR" (id 0) (at 0 -3.81 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Value" "VDD" (id 1) (at 0 3.81 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "" (id 2) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "" (id 3) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "power-flag" (id 4) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Power symbol creates a global label with name \"VDD\"" (id 5) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "VDD_0_1"
        (polyline
          (pts
            (xy -0.762 1.27)
            (xy 0 2.54)
          )
          (stroke (width 0) (type default) (color 0 0 0 0))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 0 0)
            (xy 0 2.54)
          )
          (stroke (width 0) (type default) (color 0 0 0 0))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 0 2.54)
            (xy 0.762 1.27)
          )
          (stroke (width 0) (type default) (color 0 0 0 0))
          (fill (type none))
        )
      )
      (symbol "VDD_1_1"
        (pin power_in line (at 0 0 90) (length 0) hide
          (name "VDD" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
      )
    )
  )

  (junction (at 114.3 85.09) (diameter 0) (color 0 0 0 0)
    (uuid 05c7bae7-e3d7-4534-b93e-1cb9116e09b0)
  )
  (junction (at 88.9 85.09) (diameter 0) (color 0 0 0 0)
    (uuid 36030f85-5c1c-46ad-b2ff-5f5aa3437949)
  )

  (wire (pts (xy 93.98 85.09) (xy 88.9 85.09))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 10127079-2aea-4979-8844-f7021e2bf4bc)
  )
  (wire (pts (xy 114.3 85.09) (xy 114.3 83.82))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 1aeb9575-a75c-4b9e-94bb-6f70e967af88)
  )
  (wire (pts (xy 88.9 85.09) (xy 88.9 83.82))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 1e28fbd2-f3c9-4322-a36f-770f80771eb6)
  )
  (wire (pts (xy 88.9 85.09) (xy 88.9 86.36))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 39e86267-1c1a-4223-a1d1-afc6eaa7b643)
  )
  (wire (pts (xy 114.3 85.09) (xy 114.3 86.36))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid fa7d00b5-1f4c-4abd-88a8-b5df29577616)
  )
  (wire (pts (xy 119.38 85.09) (xy 114.3 85.09))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid fbd12a6f-82ff-4fb1-826b-6ad2e84ba26c)
  )

  (text "INA181A1IDBVR\nIn stock at LCSC\nA1 is 20x gain\nTherefore want 0.165V at 5+A\n0.02 ohm shunt gets us close"
    (at 168.91 97.79 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid c934fa54-e95d-4de3-8a22-4e45bb17c7af)
  )

  (label "VRef" (at 157.48 90.17 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 3af81090-0acf-49e4-a02b-4d7cb59277be)
  )
  (label "VRef" (at 119.38 85.09 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid af3b217c-f2ae-4d2f-bcdb-a82e5e2682b9)
  )

  (hierarchical_label "VBus In" (shape input) (at 88.9 76.2 0)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid 3f680b2d-6946-49c2-b589-c0d75c6f0a49)
  )
  (hierarchical_label "I Sense 2" (shape input) (at 147.32 85.09 180)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid 407d6303-bb5e-45c3-9b6a-5501f9107bda)
  )
  (hierarchical_label "ADC VBus" (shape input) (at 93.98 85.09 0)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid 88b265fc-c8a5-4dda-b061-d77c28ebd9f0)
  )
  (hierarchical_label "I Sense 1" (shape input) (at 147.32 80.01 180)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid 8b8db98d-5e75-47c0-94b1-bac24038fdf1)
  )
  (hierarchical_label "ADC Current" (shape input) (at 162.56 82.55 0)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid 9ce8a7c2-a361-4dda-8daf-3f3342188350)
  )

  (symbol (lib_id "power:GND") (at 114.3 93.98 0) (unit 1)
    (in_bom yes) (on_board yes) (fields_autoplaced)
    (uuid 0d93a723-51a6-484f-9d01-65584e9aaa36)
    (property "Reference" "#PWR0143" (id 0) (at 114.3 100.33 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Value" "GND" (id 1) (at 114.3 99.06 0))
    (property "Footprint" "" (id 2) (at 114.3 93.98 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "" (id 3) (at 114.3 93.98 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 06af3cd6-262c-4293-90b2-459224063e1a))
  )

  (symbol (lib_id "power:VDD") (at 114.3 76.2 0) (unit 1)
    (in_bom yes) (on_board yes) (fields_autoplaced)
    (uuid 2116ac8a-6c19-4db6-aec1-63bf7b161e34)
    (property "Reference" "#PWR0140" (id 0) (at 114.3 80.01 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Value" "VDD" (id 1) (at 114.3 71.12 0))
    (property "Footprint" "" (id 2) (at 114.3 76.2 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "" (id 3) (at 114.3 76.2 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 1c38a796-0e52-4352-a901-a44502493f52))
  )

  (symbol (lib_id "Device:R") (at 88.9 90.17 0) (unit 1)
    (in_bom yes) (on_board yes) (fields_autoplaced)
    (uuid 2d505387-6c15-4319-ab31-315284aa4c23)
    (property "Reference" "R702" (id 0) (at 91.44 88.8999 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "100K" (id 1) (at 91.44 91.4399 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Resistor_SMD:R_0603_1608Metric" (id 2) (at 87.122 90.17 90)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (id 3) (at 88.9 90.17 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 56a16591-55dc-4acf-bddf-4e9b7f53ea6f))
    (pin "2" (uuid 9932baeb-7ba7-47e8-a607-430a75ed1892))
  )

  (symbol (lib_id "Device:R") (at 114.3 90.17 0) (unit 1)
    (in_bom yes) (on_board yes) (fields_autoplaced)
    (uuid 456f46ba-2422-4e6e-930f-9ba6750d29da)
    (property "Reference" "R704" (id 0) (at 116.84 88.8999 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "100K" (id 1) (at 116.84 91.4399 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Resistor_SMD:R_0603_1608Metric" (id 2) (at 112.522 90.17 90)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (id 3) (at 114.3 90.17 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 3bbc24d0-1f4a-46f4-a528-a143cabcc741))
    (pin "2" (uuid 434ee684-2cd0-4608-80c2-c317d64c0f2d))
  )

  (symbol (lib_id "power:GND") (at 152.4 90.17 0) (unit 1)
    (in_bom yes) (on_board yes) (fields_autoplaced)
    (uuid 63d18546-978a-4ade-b5df-12f3cfd04a15)
    (property "Reference" "#PWR0141" (id 0) (at 152.4 96.52 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Value" "GND" (id 1) (at 152.4 95.25 0))
    (property "Footprint" "" (id 2) (at 152.4 90.17 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "" (id 3) (at 152.4 90.17 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid bdcc63dc-4950-456a-92ef-1eccd8d84353))
  )

  (symbol (lib_id "power:GND") (at 88.9 93.98 0) (unit 1)
    (in_bom yes) (on_board yes) (fields_autoplaced)
    (uuid 6a14883c-e23a-4bd5-84e9-8efebed799c9)
    (property "Reference" "#PWR0139" (id 0) (at 88.9 100.33 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Value" "GND" (id 1) (at 88.9 99.06 0))
    (property "Footprint" "" (id 2) (at 88.9 93.98 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "" (id 3) (at 88.9 93.98 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid f26cc07b-bf4d-4ec3-b9f1-2eb49f6f8279))
  )

  (symbol (lib_id "power:VDD") (at 152.4 74.93 0) (unit 1)
    (in_bom yes) (on_board yes) (fields_autoplaced)
    (uuid c78b9413-d043-4274-8cdb-66dcb9cc5a63)
    (property "Reference" "#PWR0142" (id 0) (at 152.4 78.74 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Value" "VDD" (id 1) (at 152.4 69.85 0))
    (property "Footprint" "" (id 2) (at 152.4 74.93 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "" (id 3) (at 152.4 74.93 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid f6d1fefb-376d-4b6b-bdb1-6d4b8e5f289a))
  )

  (symbol (lib_id "Device:R") (at 114.3 80.01 0) (unit 1)
    (in_bom yes) (on_board yes) (fields_autoplaced)
    (uuid d44ca519-5ef2-4374-a2c3-7acf0f68ff9a)
    (property "Reference" "R703" (id 0) (at 116.84 78.7399 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "100K" (id 1) (at 116.84 81.2799 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Resistor_SMD:R_0603_1608Metric" (id 2) (at 112.522 80.01 90)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (id 3) (at 114.3 80.01 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid a6ddc70e-2060-4a9d-afe4-3c29e081b437))
    (pin "2" (uuid cce01cb4-53e7-48ec-bd70-5cec3c36d261))
  )

  (symbol (lib_id "Amplifier_Current:INA181") (at 154.94 82.55 0) (unit 1)
    (in_bom yes) (on_board yes) (fields_autoplaced)
    (uuid df2400cd-5435-4261-addb-51b872c3b57c)
    (property "Reference" "U701" (id 0) (at 165.1 77.851 0))
    (property "Value" "INA181" (id 1) (at 165.1 80.391 0))
    (property "Footprint" "Package_TO_SOT_SMD:SOT-23-6" (id 2) (at 156.21 81.28 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "http://www.ti.com/lit/ds/symlink/ina181.pdf" (id 3) (at 158.75 78.74 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 7b73a893-7cee-4938-a875-22c931cc31e8))
    (pin "2" (uuid 32393d2e-03cb-43bb-a47b-ac6d8a0a7ab2))
    (pin "3" (uuid ae5d23d9-1ae4-40a0-8955-681ee9efcae3))
    (pin "4" (uuid 08f4871f-fcf6-4e8f-be36-2c6e721a4d90))
    (pin "5" (uuid d83dab06-5ace-409f-ad0f-6e2ceeea80d7))
    (pin "6" (uuid ba625ff6-d796-4c90-9cf4-af425e310f0e))
  )

  (symbol (lib_id "Device:R") (at 88.9 80.01 0) (unit 1)
    (in_bom yes) (on_board yes) (fields_autoplaced)
    (uuid e02c9cd3-fe72-4738-8106-3699abc57d7d)
    (property "Reference" "R701" (id 0) (at 91.44 78.7399 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "1.4M" (id 1) (at 91.44 81.2799 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Resistor_SMD:R_0603_1608Metric" (id 2) (at 87.122 80.01 90)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (id 3) (at 88.9 80.01 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 376472bf-9475-42f4-804e-5c7661d06245))
    (pin "2" (uuid 012bc829-d961-41c7-b551-2104d76941cf))
  )
)
